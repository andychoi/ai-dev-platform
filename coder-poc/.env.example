# Coder WebIDE PoC - Environment Configuration
# Copy this file to .env and customize as needed

# =============================================================================
# CODER SERVER CONFIGURATION
# =============================================================================

# Port for Coder web UI and API
CODER_PORT=7080

# External URL for accessing Coder (used for workspace connections)
# IMPORTANT: For Docker-based deployments, use host.docker.internal
# so workspace containers can reach the Coder server.
# - Local Docker: http://host.docker.internal:7080
# - Remote access: Use your machine's IP or hostname (e.g., http://192.168.1.100:7080)
# - DO NOT use localhost - it won't work from inside containers!
CODER_ACCESS_URL=http://host.docker.internal:7080

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL password (change in production!)
POSTGRES_PASSWORD=coderpassword

# =============================================================================
# ADMIN USER (for setup script)
# =============================================================================

# Initial admin username
ADMIN_USER=admin

# Initial admin email
ADMIN_EMAIL=admin@local.test

# Initial admin password (change this!)
ADMIN_PASSWORD=SecureP@ssw0rd!

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================

# Docker group ID (usually auto-detected)
# Linux: Run `getent group docker | cut -d: -f3`
# Mac: Usually 999 or not needed
# DOCKER_GID=999

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================

# Enable verbose logging (true/false)
# CODER_VERBOSE=false

# Disable telemetry (true/false)
# CODER_TELEMETRY=false

# Maximum session duration (e.g., 8h, 24h)
# CODER_MAX_SESSION_EXPIRY=24h

# =============================================================================
# AI GATEWAY CONFIGURATION
# Multi-provider AI API proxy for secure AI access from workspaces
# =============================================================================

# Anthropic Claude API
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=

# AWS Bedrock Configuration
# Requires IAM credentials with bedrock:InvokeModel permission
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1

# Google Gemini API (planned)
# Get your API key from: https://makersuite.google.com/app/apikey
GOOGLE_API_KEY=

# AI Gateway Settings
# Rate limit: requests per minute per user
AI_RATE_LIMIT_RPM=60

# =============================================================================
# DRONE CI CONFIGURATION
# =============================================================================

# RPC secret for Drone server-runner communication
DRONE_RPC_SECRET=super-secret-rpc-key

# Drone server host (for webhook callbacks)
DRONE_SERVER_HOST=localhost:8080

# =============================================================================
# AUTHENTIK - Identity Provider & RBAC
# Provides SSO, user management, approval workflows
# =============================================================================

# Secret key for Authentik (generate with: openssl rand -base64 32)
AUTHENTIK_SECRET_KEY=change-me-to-a-long-random-string

# Authentik database password
AUTHENTIK_DB_PASSWORD=authentik

# Initial admin password for Authentik (user: akadmin)
AUTHENTIK_ADMIN_PASSWORD=admin

# =============================================================================
# AZURE AD INTEGRATION (Optional)
# Uncomment and configure to enable Azure AD SSO federation
# =============================================================================

# Azure AD Application (Client) ID
# AZURE_CLIENT_ID=

# Azure AD Client Secret
# AZURE_CLIENT_SECRET=

# Azure AD Tenant ID
# AZURE_TENANT_ID=

# =============================================================================
# TEST DATABASE CONFIGURATION
# =============================================================================

# Test database password (internal network only)
TESTDB_PASSWORD=testpassword

# =============================================================================
# DEVDB CONFIGURATION (Developer Database Server)
# =============================================================================

# DevDB admin password
DEVDB_ADMIN_PASSWORD=devdbadmin123

# =============================================================================
# PLATFORM ADMIN CONFIGURATION
# =============================================================================

# Platform Admin credentials
PLATFORM_ADMIN_USER=admin
PLATFORM_ADMIN_PASSWORD=admin123

# Coder admin credentials for Platform Admin to use
CODER_ADMIN_PASSWORD=CoderAdmin123!

# =============================================================================
# LITELLM PROXY CONFIGURATION
# Centralized AI gateway with per-user keys, budgets, and audit logging
# =============================================================================

# Master key for LiteLLM admin API (generate with: openssl rand -base64 32)
# Must start with 'sk-'
LITELLM_MASTER_KEY=sk-poc-litellm-master-key-change-in-production

# LiteLLM database URL
LITELLM_DATABASE_URL=postgresql://litellm:litellm@postgres:5432/litellm

# Default per-user budget (USD)
LITELLM_DEFAULT_USER_BUDGET=10.00

# Default rate limit (requests per minute per key)
LITELLM_DEFAULT_RPM=60
