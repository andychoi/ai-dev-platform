# LiteLLM Proxy Configuration
# Replaces custom AI Gateway with standardized OpenAI-compatible proxy

model_list:
  # Claude Sonnet 4.5 — Anthropic direct (primary) + Bedrock (fallback)
  # LiteLLM routes to whichever provider has valid credentials
  - model_name: claude-sonnet-4-5
    litellm_params:
      model: anthropic/claude-sonnet-4-5-20250929
      api_key: os.environ/ANTHROPIC_API_KEY
    model_info:
      max_tokens: 8192
      input_cost_per_token: 0.000003
      output_cost_per_token: 0.000015

  - model_name: claude-sonnet-4-5
    litellm_params:
      model: bedrock/us.anthropic.claude-sonnet-4-5-20250929-v1:0
      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID
      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY
      aws_region_name: os.environ/AWS_REGION

  # Claude Haiku 4.5 — Anthropic direct (primary) + Bedrock (fallback)
  - model_name: claude-haiku-4-5
    litellm_params:
      model: anthropic/claude-haiku-4-5-20251001
      api_key: os.environ/ANTHROPIC_API_KEY
    model_info:
      max_tokens: 8192
      input_cost_per_token: 0.0000008
      output_cost_per_token: 0.000004

  - model_name: claude-haiku-4-5
    litellm_params:
      model: bedrock/us.anthropic.claude-haiku-4-5-20251001-v1:0
      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID
      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY
      aws_region_name: os.environ/AWS_REGION

  # Claude Opus 4 via Anthropic API (no Bedrock equivalent)
  - model_name: claude-opus-4
    litellm_params:
      model: anthropic/claude-opus-4-20250514
      api_key: os.environ/ANTHROPIC_API_KEY
    model_info:
      max_tokens: 8192
      input_cost_per_token: 0.000015
      output_cost_per_token: 0.000075

  # Claude Sonnet 4.5 via AWS Bedrock
  - model_name: bedrock-claude-sonnet
    litellm_params:
      model: bedrock/us.anthropic.claude-sonnet-4-5-20250929-v1:0
      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID
      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY
      aws_region_name: os.environ/AWS_REGION

  # Claude Haiku 4.5 via AWS Bedrock
  - model_name: bedrock-claude-haiku
    litellm_params:
      model: bedrock/us.anthropic.claude-haiku-4-5-20251001-v1:0
      aws_access_key_id: os.environ/AWS_ACCESS_KEY_ID
      aws_secret_access_key: os.environ/AWS_SECRET_ACCESS_KEY
      aws_region_name: os.environ/AWS_REGION

general_settings:
  master_key: os.environ/LITELLM_MASTER_KEY
  database_url: os.environ/DATABASE_URL

litellm_settings:
  # Default budget per end-user (developers)
  max_end_user_budget: 10.00
  # Drop params not supported by provider instead of erroring
  drop_params: true
  # Enable logging — log_to_db for LiteLLM UI, langfuse for trace analytics
  success_callback: ["log_to_db", "langfuse"]
  failure_callback: ["log_to_db", "langfuse"]
  # Privacy-first: only log metadata (model, tokens, cost, latency) — no prompt/completion content
  # Set to false to enable full content logging in Langfuse
  turn_off_message_logging: true
  # Tag traces with user identity for correlation in Langfuse
  langfuse_default_tags:
    - "user_api_key_alias"
    - "user_api_key_user_id"
  # Callbacks:
  # 1. enforcement_hook — injects system prompts based on key metadata (design-first)
  # 2. guardrails_hook — blocks PII, financial data, secrets before reaching model
  callbacks: ["enforcement_hook.proxy_handler_instance", "guardrails_hook.guardrails_instance"]
